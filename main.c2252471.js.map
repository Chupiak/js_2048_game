{"version":3,"sources":["scripts/main.js"],"names":["restartElement","document","createElement","game","array","score","putArrayInPage","arr","querySelectorAll","forEach","item","removeAttribute","classList","add","textContent","i","tdElem","setNumberInArray","twoOrFour","Math","random","freeCell","floor","showScores","sco","querySelector","movingLeft","k","j","movingRight","movingUp","movingDown","completeForMoving","winCheck","max","element","apply","remove","lossCheck","zeroCount","includes","mirrors","body","addEventListener","eventFunc","key","canMoveUp","firstNum","secondNum","doublingUp","row","canMoveDown","doublingDown","canMoveLeft","doublingLeft","canMoveRight","doublingRight","append"],"mappings":"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","file":"main.c2252471.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst restartElement = document.createElement('button');\n\nrestartElement.textContent = 'Restart';\nrestartElement.classList.add('button', 'restart', 'hidden');\ndocument.querySelector('.controls').append(restartElement);\n\n// *********************** START ************************ //\n\ndocument.body.querySelector('.start').addEventListener('click', () => {\n  document.querySelector('.start').classList.add('hidden');\n  restartElement.classList.remove('hidden');\n  document.querySelector('.message-start').classList.add('hidden');\n  game();\n});\n\ndocument.body.querySelector('.restart').addEventListener('click', () => {\n  document.querySelector('.message-win').classList.add('hidden');\n  document.querySelector('.message-lose').classList.add('hidden');\n  game();\n});\n\nfunction game() {\n  const array = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  let score = 0;\n\n  setNumberInArray(array);\n  setNumberInArray(array);\n  putArrayInPage(array);\n  showScores(score);\n\n  function putArrayInPage(arr) {\n    document.querySelectorAll('td').forEach((item) => {\n      item.removeAttribute('class');\n      item.classList.add('field-cell');\n      item.textContent = '';\n    });\n\n    for (let i = 0; i < 16; i++) {\n      const tdElem = document.querySelectorAll('td')[i];\n\n      if (arr[i] !== 0) {\n        tdElem.textContent = arr[i];\n        tdElem.classList.add('field-cell--' + arr[i]);\n      }\n    }\n  }\n\n  function winCheck(arr) {\n    const max = Math.max.apply(null, arr);\n    const element = document.querySelector('.message-win').classList;\n\n    if (max >= 2048) {\n      element.remove('hidden');\n    } else {\n      element.add('hidden');\n    }\n  }\n\n  function lossCheck(arr) {\n    const zeroCount = arr.includes(0);\n    let mirrors = 0;\n\n    for (let i = 0; i <= 3; i++) {\n      for (let j = 0; j <= 8; j = j + 4) {\n        if (arr[i + j] === arr[i + j + 4]) {\n          mirrors++;\n        }\n      }\n    }\n\n    for (let i = 0; i <= 12; i = i + 4) {\n      for (let j = 0; j <= 2; j++) {\n        if (arr[i + j] === arr[i + j + 1]) {\n          mirrors++;\n        }\n      }\n    }\n\n    if (mirrors === 0 && zeroCount === false) {\n      document.querySelector('.message-lose').classList.remove('hidden');\n    } else {\n      document.querySelector('.message-lose').classList.add('hidden');\n    }\n  }\n\n  function setNumberInArray(arr) {\n    let twoOrFour = Math.random() * 100;\n\n    twoOrFour = twoOrFour <= 10 ? 4 : 2;\n\n    for (let i = 0; i < 10000; i++) {\n      const freeCell = Math.floor(Math.random() * 16);\n\n      if (arr[freeCell] === 0) {\n        arr[freeCell] = twoOrFour;\n\n        return;\n      }\n    }\n  }\n\n  function showScores(sco) {\n    document.querySelector('.game-score').textContent = sco;\n  }\n\n  // ***************** moving and dubling function **************** //\n\n  function doublingLeft(arr) {\n    for (let row = 0; row <= 12; row = row + 4) {\n      for (let i = 0; i <= 2; i++) {\n        if (arr[i + row] === arr[i + row + 1]) {\n          arr[i + row] = arr[i + row] * 2;\n          score = score + arr[i + row];\n          arr[i + row + 1] = 0;\n        }\n      }\n    }\n  }\n\n  function movingLeft(arr) {\n    for (let k = 0; k < 6; k++) {\n      for (let i = 1; i <= 13; i = i + 4) {\n        for (let j = 0; j <= 2; j++) {\n          if (arr[i + j - 1] === 0) {\n            arr[i + j - 1] = arr[i + j];\n            arr[i + j] = 0;\n          }\n        }\n      }\n    }\n  }\n\n  function canMoveLeft(arr) {\n    for (let i = 1; i <= 13; i = i + 4) {\n      for (let j = 0; j <= 2; j++) {\n        const firstNum = arr[i + j];\n        const secondNum = arr[i + j - 1];\n\n        if ((firstNum !== 0) && (firstNum === secondNum || secondNum === 0)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function doublingRight(arr) {\n    for (let row = 0; row <= 12; row = row + 4) {\n      for (let i = 2; i >= 0; i--) {\n        if (arr[i + row] === arr[i + row + 1]) {\n          arr[i + row + 1] = arr[i + row + 1] * 2;\n          score = score + arr[i + row + 1];\n          arr[i + row] = 0;\n        }\n      }\n    }\n  }\n\n  function movingRight(arr) {\n    for (let k = 0; k < 6; k++) {\n      for (let i = 2; i <= 14; i = i + 4) {\n        for (let j = 2; j >= 0; j--) {\n          if (arr[i - j + 1] === 0) {\n            arr[i - j + 1] = arr[i - j];\n            arr[i - j] = 0;\n          }\n        }\n      }\n    }\n  }\n\n  function canMoveRight(arr) {\n    for (let i = 2; i <= 14; i = i + 4) {\n      for (let j = 0; j <= 2; j++) {\n        const firstNum = arr[i - j];\n        const secondNum = arr[i - j + 1];\n\n        if ((firstNum !== 0) && (firstNum === secondNum || secondNum === 0)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function doublingUp(arr) {\n    for (let row = 0; row <= 3; row++) {\n      for (let i = 0; i <= 12; i = i + 4) {\n        if (arr[row + i] === arr[row + i + 4]) {\n          arr[row + i] = arr[row + i] * 2;\n          score = score + arr[row + i];\n          arr[row + i + 4] = 0;\n        }\n      }\n    }\n  }\n\n  function movingUp(arr) {\n    for (let k = 0; k < 6; k++) {\n      for (let i = 4; i <= 7; i++) {\n        for (let j = 0; j <= 8; j = j + 4) {\n          if (arr[i + j - 4] === 0) {\n            arr[i + j - 4] = arr[i + j];\n            arr[i + j] = 0;\n          }\n        }\n      }\n    }\n  }\n\n  function canMoveUp(arr) {\n    for (let i = 4; i <= 7; i++) {\n      for (let j = 0; j <= 8; j = j + 4) {\n        const firstNum = arr[i + j];\n        const secondNum = arr[i + j - 4];\n\n        if ((firstNum !== 0) && (firstNum === secondNum || secondNum === 0)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function doublingDown(arr) {\n    for (let row = 0; row <= 3; row++) {\n      for (let i = 12; i >= 0; i = i - 4) {\n        if (arr[row + i] === arr[row + i - 4]) {\n          arr[row + i] = arr[row + i] * 2;\n          score = score + arr[row + i];\n          arr[row + i - 4] = 0;\n        }\n      }\n    }\n  }\n\n  function movingDown(arr) {\n    for (let k = 0; k < 6; k++) {\n      for (let i = 8; i <= 11; i++) {\n        for (let j = 8; j >= 0; j = j - 4) {\n          if (arr[i - j + 4] === 0) {\n            arr[i - j + 4] = arr[i - j];\n            arr[i - j] = 0;\n          }\n        }\n      }\n    }\n  }\n\n  function canMoveDown(arr) {\n    for (let i = 8; i <= 11; i++) {\n      for (let j = 0; j <= 8; j = j + 4) {\n        const firstNum = arr[i - j];\n        const secondNum = arr[i - j + 4];\n\n        if ((firstNum !== 0) && (firstNum === secondNum || secondNum === 0)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function completeForMoving() {\n    putArrayInPage(array);\n    showScores(score);\n    winCheck(array);\n    lossCheck(array);\n  }\n\n  // ***************** events: up down left right **************** //\n\n  document.body.addEventListener('keydown', (eventFunc) => {\n    if (eventFunc.key === 'ArrowUp') {\n      if (canMoveUp(array) === true) {\n        movingUp(array);\n        doublingUp(array);\n        movingUp(array);\n        setNumberInArray(array);\n      }\n      completeForMoving();\n    }\n  });\n\n  document.body.addEventListener('keydown', (eventFunc) => {\n    if (eventFunc.key === 'ArrowDown') {\n      if (canMoveDown(array) === true) {\n        movingDown(array);\n        doublingDown(array);\n        movingDown(array);\n        setNumberInArray(array);\n      }\n      completeForMoving();\n    }\n  });\n\n  document.body.addEventListener('keydown', (eventFunc) => {\n    if (eventFunc.key === 'ArrowLeft') {\n      if (canMoveLeft(array) === true) {\n        movingLeft(array);\n        doublingLeft(array);\n        movingLeft(array);\n        setNumberInArray(array);\n      }\n      completeForMoving();\n    }\n  });\n\n  document.body.addEventListener('keydown', (eventFunc) => {\n    if (eventFunc.key === 'ArrowRight') {\n      if (canMoveRight(array) === true) {\n        movingRight(array);\n        doublingRight(array);\n        movingRight(array);\n        setNumberInArray(array);\n      }\n      completeForMoving();\n    }\n  });\n}\n"]}